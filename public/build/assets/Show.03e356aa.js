import{L as p}from"./Layout.4d67cb95.js";import{l as S,h as w,k as x,r as b,c as l,a as f,w as k,b as t,d as y,m as K,t as s,F as g,e as P,f as r,p as D,v as B,i as N,o as i,g as L}from"./app.5ad37d3c.js";import{S as M}from"./sweetalert2.esm.all.5c9cd675.js";import{_ as V}from"./_plugin-vue_export-helper.cdc0426e.js";const C={layout:p,components:{Link:S,Head:w},props:{transaction:Object},setup(o){const n=x({transaction_status:o.transaction.transaction_status});return{form:n,submit:()=>{N.put(`/admin/transactions/${o.transaction.id}`,{transaction_status:n.transaction_status},{onSuccess:()=>{M.fire({title:"Success!",text:"Transaksi Berhasil Diupdate!.",icon:"success",showConfirmButton:!1,timer:1e3})}})}}},methods:{formatPrice(o){return"Rp."+(o/1).toFixed().replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},F={class:"page-wrapper"},A={class:"page-content"},H={class:"card border-top border-0 border-3 border-primary"},U={class:"card-body"},_={class:"d-lg-flex align-items-center"},j={class:"ms-auto"},E={class:"table-responsive"},O={class:"table mb-0"},R={class:"badge bg-primary"},G={class:"col-sm-9"},J={class:"badge bg-success m-1"},W={key:1,class:"badge bg-success"},q={key:0},z={key:1},I={key:2},Q={key:0,class:"fw-bold"},X={key:1,class:"fw-bold"},Y={key:2,class:"fw-bold"},Z={key:3,class:"fw-bold"},c={key:4,class:"fw-bold"},$={key:0},h=["src"],tt={key:1};function nt(o,n,a,u,at,d){var m;const v=b("Head"),T=b("Link");return i(),l(g,null,[f(v,null,{default:k(()=>{var e;return[t("title",null,`
            `+s((e=o.$page.props.setting.app_name)!=null?e:"Atur Setting Terlebih Dahulu")+`
            - Detail Transaksi
        `,1)]}),_:1}),t("div",F,[t("div",A,[n[51]||(n[51]=y('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page"> Detail Transaksi </li></ol></nav></div></div>',1)),t("div",H,[t("div",U,[t("div",_,[t("div",j,[f(T,{href:"/admin/transactions",class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:k(()=>[...n[2]||(n[2]=[L("Kembali",-1)])]),_:1})])]),t("div",E,[t("form",{onSubmit:n[1]||(n[1]=K((...e)=>u.submit&&u.submit(...e),["prevent"]))},[t("table",O,[t("tbody",null,[n[17]||(n[17]=t("tr",null,[t("th",{colspan:"3"},"Biodata")],-1)),t("tr",null,[n[3]||(n[3]=t("td",{width:"300px"},"Nama Lengkap",-1)),n[4]||(n[4]=t("td",{width:"20px"},":",-1)),t("td",null,s(a.transaction.user.name),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Email",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,s((m=a.transaction.user.email)!=null?m:"-"),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Provinsi",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,s(a.transaction.user.student&&a.transaction.user.student.province?a.transaction.user.student.province.name:"-"),1)]),t("tr",null,[n[9]||(n[9]=t("td",null,"Kota/Kab",-1)),n[10]||(n[10]=t("td",null,":",-1)),t("td",null,s(a.transaction.user.student&&a.transaction.user.student.city?a.transaction.user.student.city.name:"-"),1)]),t("tr",null,[n[11]||(n[11]=t("td",null,"Kecamatan",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,s(a.transaction.user.student&&a.transaction.user.student.district?a.transaction.user.student.district.name:"-"),1)]),t("tr",null,[n[13]||(n[13]=t("td",null,"Desa/Kelurahan",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,s(a.transaction.user.student&&a.transaction.user.student.village?a.transaction.user.student.village.name:"-"),1)]),t("tr",null,[n[15]||(n[15]=t("td",null,"Nomor Telepon (Whatsapp)",-1)),n[16]||(n[16]=t("td",null,":",-1)),t("td",null,s(a.transaction.user.student&&a.transaction.user.student.phone_number?a.transaction.user.student.phone_number:"-"),1)])]),t("tbody",null,[n[34]||(n[34]=t("tr",null,[t("th",{colspan:"3"},"Detail Transaksi")],-1)),t("tr",null,[n[18]||(n[18]=t("td",null,"Kode Transaksi",-1)),n[19]||(n[19]=t("td",null,":",-1)),t("td",null,s(a.transaction.code),1)]),t("tr",null,[n[20]||(n[20]=t("td",null,"Tanggal Tansaksi",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,s(a.transaction.created_at),1)]),t("tr",null,[n[22]||(n[22]=t("td",null,"Kategori Peminatan",-1)),n[23]||(n[23]=t("td",null,":",-1)),t("td",null,[t("span",R,s(a.transaction.category.name),1)])]),t("tr",null,[n[24]||(n[24]=t("td",null,"Deskripsi Transaksi",-1)),n[25]||(n[25]=t("td",null,":",-1)),t("td",null,s(a.transaction.description),1)]),t("tr",null,[n[26]||(n[26]=t("td",null,"Kategori Member",-1)),n[27]||(n[27]=t("td",null,":",-1)),t("td",null,[t("div",G,[a.transaction.member_categories?(i(!0),l(g,{key:0},P(a.transaction.member_categories,e=>(i(),l("span",J,s(e),1))),256)):(i(),l("span",W,"Untuk Seluruh Kategori Member"))])])]),t("tr",null,[n[28]||(n[28]=t("td",null,"Metode Pembayaran",-1)),n[29]||(n[29]=t("td",null,":",-1)),t("td",null,[a.transaction.payment_method=="account_balance"?(i(),l("span",q,"Saldo Akun")):r("",!0),a.transaction.payment_method=="manual_transfer"?(i(),l("span",z,"Transfer Manual (Konfirmasi Pembayaran)")):r("",!0),a.transaction.payment_method=="automatic_transfer_midtrans"?(i(),l("span",I,"Transfer Otomatis")):r("",!0)])]),t("tr",null,[n[30]||(n[30]=t("td",null,"Total Transaksi",-1)),n[31]||(n[31]=t("td",null,":",-1)),t("td",null,s(d.formatPrice(a.transaction.total_payment)),1)]),t("tr",null,[n[32]||(n[32]=t("td",null,"Status Transaksi",-1)),n[33]||(n[33]=t("td",null,":",-1)),t("td",null,[a.transaction.transaction_status=="pending"?(i(),l("span",Q,"Pending - Belum melakukan pembayaran")):r("",!0),a.transaction.transaction_status=="paid"?(i(),l("span",X,"Telah melakukan pembayaran")):r("",!0),a.transaction.transaction_status=="failed"?(i(),l("span",Y,"Transaksi Gagal")):r("",!0),a.transaction.transaction_status=="done"?(i(),l("span",Z,"Transaksi Selesai")):r("",!0),a.transaction.transaction_status=="expired"?(i(),l("span",c,"Transaksi Kadaluarsa")):r("",!0)])])]),a.transaction.payment_method=="manual_transfer"&&a.transaction.payment_confirmation?(i(),l("tbody",$,[n[45]||(n[45]=t("tr",null,[t("th",{colspan:"3"}," Data Konfirmasi Pembayaran ")],-1)),t("tr",null,[n[35]||(n[35]=t("td",null,"Nama Pengirim Transfer",-1)),n[36]||(n[36]=t("td",null,":",-1)),t("td",null,s(a.transaction.payment_confirmation.rekening_name),1)]),t("tr",null,[n[37]||(n[37]=t("td",null,"Di Transfer Ke Rekening",-1)),n[38]||(n[38]=t("td",null,":",-1)),t("td",null,s(a.transaction.payment_confirmation.bank.bank_name+" - "+a.transaction.payment_confirmation.bank.rekening_number+" - "+a.transaction.payment_confirmation.bank.rekening_name),1)]),t("tr",null,[n[39]||(n[39]=t("td",null,"Tanggal Transfer",-1)),n[40]||(n[40]=t("td",null,":",-1)),t("td",null,s(a.transaction.payment_confirmation.transfer_date),1)]),t("tr",null,[n[41]||(n[41]=t("td",null,"Jumlah Transfer",-1)),n[42]||(n[42]=t("td",null,":",-1)),t("td",null,s(d.formatPrice(a.transaction.payment_confirmation.total_payment)),1)]),t("tr",null,[n[43]||(n[43]=t("td",null,"Bukti Transfer",-1)),n[44]||(n[44]=t("td",null,":",-1)),t("img",{src:"/storage/upload_files/payment_confirmation/"+a.transaction.payment_confirmation.file,style:{width:"300px"}},null,8,h)]),n[46]||(n[46]=t("tr",null,[t("th",{colspan:"3"},"\xA0")],-1))])):r("",!0),a.transaction.transaction_status=="pending"||a.transaction.transaction_status=="paid"?(i(),l("tbody",tt,[t("tr",null,[n[48]||(n[48]=t("td",null,"Ubah Status Transaksi",-1)),n[49]||(n[49]=t("td",null,":",-1)),t("td",null,[D(t("select",{class:"form-control","onUpdate:modelValue":n[0]||(n[0]=e=>u.form.transaction_status=e)},[...n[47]||(n[47]=[y('<option value=""> [ Pilih Status Transaksi ] </option><option value="pending"> Pending </option><option value="paid"> Paid </option><option value="done"> Done </option><option value="failed"> Failed </option>',5)])],512),[[B,u.form.transaction_status]])])]),n[50]||(n[50]=t("tr",null,[t("td",{colspan:"3"},[t("button",{type:"submit",class:"btn btn-primary btn-sm px-5"}," Submit ")])],-1))])):r("",!0)])],32)])])])])])],64)}const et=V(C,[["render",nt]]);export{et as default};
