import{L as g}from"./Layout.4d67cb95.js";import{l as h,h as w,k as T,r as u,c as o,a as c,w as r,b as s,d as x,f as l,x as S,F as v,e as L,i as y,o as e,t as d,g as p}from"./app.5ad37d3c.js";import{S as P}from"./sweetalert2.esm.all.5c9cd675.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";const H={layout:g,components:{Link:h,Head:w},props:{errors:Object,transaction:Object,banks:Object,payment_confirmation:Object},setup(n){const t=T({payment_method:""});return{form:t,submit:()=>{y.post(`/user/vouchers/${n.voucher.id}/buy`,{payment_method:t.payment_method},{onSuccess:()=>{P.fire({title:"Success!",text:"Silakan Lakukan Pembayaran",icon:"success",showConfirmButton:!1,timer:1e3})}})},pay:()=>{window.snap.pay(n.transaction.snap_token,{onSuccess:()=>{y.post("/user/account-balances/pay",{transaction_id:n.transaction.id,payment_method:"automatic_transfer_midtrans"})},onPending:()=>{this.$inertia.reload()},onError:()=>{this.$inertia.visit($page.props.setting.app_url)}})}}},methods:{formatPrice(n){return"Rp."+(n/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},C={class:"page-wrapper"},D={class:"page-content"},M={class:"row"},N={class:"col-lg-12"},K={key:0,class:"alert alert-danger border-0 alert-dismissible fade show"},j=["innerHTML"],O={key:1,class:"alert alert-danger border-0 alert-dismissible fade show"},V=["innerHTML"],A={key:2,class:"alert alert-success border-0 alert-dismissible fade show"},E=["innerHTML"],F={class:"col-lg-12"},R={class:"card border-top border-0 border-3 border-primary"},G={class:"card-header"},J={class:"d-lg-flex align-items-center"},W={class:"ms-auto"},q={class:"card-body p-4"},z={class:"row mb-3"},I={class:"col-sm-9"},Q=["value"],U={class:"row mb-3"},X={class:"col-sm-9"},Y=["value"],Z={class:"row mb-3"},$={class:"col-sm-9"},ss=["value"],ts={class:"row mb-3"},as={class:"col-sm-9"},es=["value"],os={class:"row mb-3"},ns={class:"col-sm-9"},ls=["value"],is={class:"row mb-3"},rs={class:"col-sm-9"},cs=["value"],ds={class:"row mb-3"},ms={class:"col-sm-9"},us={class:"form-select",disabled:"",style:{"background-color":"#fff"}},_s=["selected"],bs=["selected"],fs={class:"row mb-3"},vs={class:"col-sm-9"},ys=["value"],ps={class:"row mb-3"},ks={class:"col-sm-9"},gs={key:0,class:"fw-bold"},hs={key:1,class:"fw-bold"},ws={key:2,class:"fw-bold"},Ts={key:3,class:"fw-bold"},xs={key:4,class:"fw-bold"},Ss={key:0,class:"row mb-3"},Ls={class:"col-sm-9"},Ps={key:1},Bs={class:"row mb-3"},Hs={class:"col-sm-9"},Cs=["value"],Ds={class:"row mb-3"},Ms={class:"col-sm-9"},Ns=["value"],Ks={class:"row mb-3"},js={class:"col-sm-9"},Os=["value"],Vs={class:"row mb-3"},As={class:"col-sm-9"},Es=["value"],Fs={class:"row mb-3"},Rs={class:"col-sm-9"},Gs=["src"],Js={key:2,class:"row"},Ws={class:"col-lg-12"},qs={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-3"},zs={class:"col"},Is={class:"card"},Qs={style:{height:"75px"}},Us=["src"],Xs={class:"card-body"},Ys={class:"card-title"},Zs={class:"card-text"},$s={class:"card-text"};function st(n,t,a,m,tt,_){const k=u("Head"),b=u("Link"),f=u("center");return e(),o(v,null,[c(k,null,{default:r(()=>{var i;return[s("title",null,`
            `+d((i=n.$page.props.setting.app_name)!=null?i:"Atur Setting Terlebih Dahulu")+`
            - Transaksi
        `,1)]}),_:1}),s("div",C,[s("div",D,[t[26]||(t[26]=x('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page"> Detail Transaksi </li></ol></nav></div></div>',1)),s("div",M,[s("div",N,[n.$page.props.session.failed?(e(),o("div",K,[s("div",{innerHTML:n.$page.props.session.failed},null,8,j),t[1]||(t[1]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):l("",!0),n.$page.props.session.error?(e(),o("div",O,[s("div",{innerHTML:n.$page.props.session.error},null,8,V),t[2]||(t[2]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):l("",!0),n.$page.props.session.success?(e(),o("div",A,[s("div",{innerHTML:n.$page.props.session.success},null,8,E),t[3]||(t[3]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):l("",!0)]),s("div",F,[s("div",R,[s("div",G,[s("div",J,[s("div",W,[a.transaction.transaction_status=="pending"&&a.transaction.payment_method=="manual_transfer"?(e(),S(b,{key:0,href:`/user/account-balances/${a.transaction.id}/payment-confirmations`,class:"btn btn-danger btn-sm mt-lg-0 mx-1"},{default:r(()=>[...t[4]||(t[4]=[p("Konfirmasi Pembayaran",-1)])]),_:1},8,["href"])):l("",!0),c(b,{href:"/user/account-balances",class:"btn btn-primary btn-sm mt-lg-0"},{default:r(()=>[...t[5]||(t[5]=[p(" Kembali ",-1)])]),_:1})])])]),s("div",q,[t[24]||(t[24]=s("h5",{class:"mb-3"},"Data Pembeli",-1)),s("div",z,[t[6]||(t[6]=s("label",{class:"col-sm-3 col-form-label"},"Nama Lengkap",-1)),s("div",I,[s("input",{type:"text",class:"form-control",value:a.transaction.user.name,disabled:"",style:{"background-color":"#fff"}},null,8,Q)])]),s("div",U,[t[7]||(t[7]=s("label",{class:"col-sm-3 col-form-label"},"Email",-1)),s("div",X,[s("input",{type:"text",class:"form-control",value:a.transaction.user.email,disabled:"",style:{"background-color":"#fff"}},null,8,Y)])]),s("div",Z,[t[8]||(t[8]=s("label",{class:"col-sm-3 col-form-label"},"Nomor Telepon (Whatsapp)",-1)),s("div",$,[s("input",{type:"text",class:"form-control",value:a.transaction.user.student&&a.transaction.user.student.phone_number?a.transaction.user.student.phone_number:"-",disabled:"",style:{"background-color":"#fff"}},null,8,ss)])]),t[25]||(t[25]=s("h5",{class:"mb-3"},"Detail Transaksi",-1)),s("div",ts,[t[9]||(t[9]=s("label",{class:"col-sm-3 col-form-label"},"Kode Transaksi",-1)),s("div",as,[s("input",{type:"text",class:"form-control",value:a.transaction.code,disabled:"",style:{"background-color":"#fff"}},null,8,es)])]),s("div",os,[t[10]||(t[10]=s("label",{class:"col-sm-3 col-form-label"},"Tanggal Transaksi",-1)),s("div",ns,[s("input",{type:"text",class:"form-control",value:a.transaction.created_at,disabled:"",style:{"background-color":"#fff"}},null,8,ls)])]),s("div",is,[t[11]||(t[11]=s("label",{class:"col-sm-3 col-form-label"},"Deskripsi Transaksi",-1)),s("div",rs,[s("input",{type:"text",class:"form-control",value:a.transaction.description,disabled:"",style:{"background-color":"#fff"}},null,8,cs)])]),s("div",ds,[t[12]||(t[12]=s("label",{class:"col-sm-3 col-form-label"},"Metode Pembayaran",-1)),s("div",ms,[s("select",us,[s("option",{value:"manual_transfer",selected:a.transaction.payment_method=="manual_transfer"}," Transfer Manual (Konfirmasi Pembayaran) ",8,_s),s("option",{value:"automatic_transfer_midtrans",selected:a.transaction.payment_method=="automatic_transfer_midtrans"}," Transfer Otomatis ",8,bs)])])]),s("div",fs,[t[13]||(t[13]=s("label",{class:"col-sm-3 col-form-label"},"Total Transaksi",-1)),s("div",vs,[s("input",{type:"text",class:"form-control",value:_.formatPrice(a.transaction.top_up_balance),disabled:"",style:{"background-color":"#fff"}},null,8,ys)])]),s("div",ps,[t[14]||(t[14]=s("label",{class:"col-sm-3 col-form-label"},"Status Transaksi",-1)),s("div",ks,[a.transaction.transaction_status=="pending"?(e(),o("span",gs,"Pending - Belum melakukan pembayaran")):l("",!0),a.transaction.transaction_status=="paid"?(e(),o("span",hs,"Telah melakukan pembayaran")):l("",!0),a.transaction.transaction_status=="failed"?(e(),o("span",ws,"Transaksi Gagal")):l("",!0),a.transaction.transaction_status=="done"?(e(),o("span",Ts,"Transaksi Selesai")):l("",!0),a.transaction.transaction_status=="expired"?(e(),o("span",xs,"Transaksi Kadaluarsa")):l("",!0)])]),a.transaction.payment_method=="automatic_transfer_midtrans"&&a.transaction.transaction_status=="pending"?(e(),o("div",Ss,[t[15]||(t[15]=s("label",{class:"col-sm-3 col-form-label"},"Action",-1)),s("div",Ls,[s("button",{onClick:t[0]||(t[0]=(...i)=>m.pay&&m.pay(...i)),class:"btn btn-primary btn-sm"}," Bayar Transaksi Sekarang ")])])):l("",!0),a.transaction.payment_method=="manual_transfer"&&a.payment_confirmation!==null?(e(),o("div",Ps,[t[21]||(t[21]=s("h5",{class:"mb-3"},"Data Konfirmasi Pembayaran",-1)),s("div",Bs,[t[16]||(t[16]=s("label",{class:"col-sm-3 col-form-label"},"Nama Pengirim Transfer",-1)),s("div",Hs,[s("input",{type:"text",class:"form-control",value:a.payment_confirmation.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,Cs)])]),s("div",Ds,[t[17]||(t[17]=s("label",{class:"col-sm-3 col-form-label"},"Di Transfer Ke Rekening",-1)),s("div",Ms,[s("input",{type:"text",class:"form-control",value:a.payment_confirmation.bank.bank_name+" - "+a.payment_confirmation.bank.rekening_number+" - "+a.payment_confirmation.bank.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,Ns)])]),s("div",Ks,[t[18]||(t[18]=s("label",{class:"col-sm-3 col-form-label"},"Tanggal Transfer",-1)),s("div",js,[s("input",{type:"text",class:"form-control",value:a.payment_confirmation.transfer_date,disabled:"",style:{"background-color":"#fff"}},null,8,Os)])]),s("div",Vs,[t[19]||(t[19]=s("label",{class:"col-sm-3 col-form-label"},"Jumlah Transfer",-1)),s("div",As,[s("input",{type:"text",class:"form-control",value:_.formatPrice(a.payment_confirmation.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,Es)])]),s("div",Fs,[t[20]||(t[20]=s("label",{class:"col-sm-3 col-form-label"},"Bukti Transfer",-1)),s("div",Rs,[s("img",{src:"/storage/upload_files/payment_confirmation/"+a.payment_confirmation.file,style:{width:"300px"}},null,8,Gs)])])])):l("",!0),a.transaction.payment_method=="manual_transfer"&&a.transaction.transaction_status=="pending"?(e(),o("div",Js,[s("div",Ws,[t[22]||(t[22]=s("h6",{class:"text-center"}," Silakan lakukan pembayaran melalui rekening berikut ini dan lakukan konfirmasi ",-1)),t[23]||(t[23]=s("br",null,null,-1)),s("div",qs,[(e(!0),o(v,null,L(a.banks,i=>(e(),o("div",zs,[s("div",Is,[s("div",Qs,[c(f,null,{default:r(()=>[s("img",{src:"/storage/upload_files/banks/"+i.image,style:{width:"125px","margin-top":"20px"}},null,8,Us)]),_:2},1024)]),s("div",Xs,[c(f,null,{default:r(()=>[s("h5",Ys,d(i.bank_name),1),s("p",Zs,d(i.rekening_number),1),s("p",$s,[s("b",null,d(i.rekening_name),1)])]),_:2},1024)])])]))),256))])])])):l("",!0)])])])])])])],64)}const lt=B(H,[["render",st]]);export{lt as default};
