import{L as z,i as Y}from"./vue-countdown.esm.2adcfdd8.js";import{p as F,e as q,t as O}from"./index.es.915a182a.js";import{a as N}from"./index.4bece78e.js";import{h as G,l as W,D as x,r as J,c as i,a as M,w as A,b as n,n as w,t as m,f as r,F as y,e as v,g as C,i as B,o}from"./app.5ad37d3c.js";import{S as b}from"./sweetalert2.esm.all.5c9cd675.js";import{_ as X}from"./_plugin-vue_export-helper.cdc0426e.js";const Z={layout:z,components:{Head:G,Link:W,VueCountdown:Y,MathJax:F},props:{id:String,page:Number,exam:Object,duration:Object,questionLists:Object,section:Number,lastSection:Number,grade:Object,indexPage:Object},mounted(){let d=document.createElement("script");d.setAttribute("src","/assets/js/MathJax.js?config=TeX-AMS-MML_HTMLorMML"),document.head.appendChild(d);function a(){const t=document.getElementById("elementId");O(t)}q({},a)},setup(d){var a,t=localStorage.getItem("indexPage");t!==null?a=x(t):a=x(d.indexPage);let e=["A","B","C","D","E"];(d.exam.id!=localStorage.getItem("examId")||d.grade.user_id!=localStorage.getItem("userId"))&&(localStorage.setItem("examId",d.exam.id),localStorage.setItem("userId",d.grade.user_id),localStorage.setItem("myAnswers",[]));const E=localStorage.getItem("myAnswers");let _=E?JSON.parse(E):[];localStorage.setItem("myAnswers",JSON.stringify(_)),localStorage.setItem("examId",d.exam.id);const f=x(0),k=x(d.duration),s=()=>{k.value=k.value-1e3,f.value=f.value+1},l=()=>{let u=document.createElement("script");u.setAttribute("src","/assets/js/MathJax.js?config=TeX-AMS-MML_HTMLorMML"),document.head.appendChild(u);function c(){const h=document.getElementById("elementId");O(h)}q({},c)},g=()=>{a.value=parseInt(a.value)-1,l()},T=()=>{a.value=parseInt(a.value)+1,l()},D=u=>{a.value=u,l()},I=()=>{if(d.grade.is_blocked!=1){let u=parseInt(d.grade.total_tolerance)>0?parseInt(d.grade.total_tolerance)-1:0,c=u==0?"Tolerasi habis, ":"Toleransi Tersisa "+u+" kali lagi, ";b.fire({title:"UJIAN AKAN DI DIBLOKIR JIKA ANDA MENINGGAL SESI UJIAN",text:c+" jika toleransi habis anda tidak dapat melanjutkan ujian dan harus menghubungi admin",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",cancelButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1}).then(h=>{h.isConfirmed&&B.post(`/user/exams/${d.exam.id}/decrement-tolerance`,{grade_id:d.grade.id},{onSuccess:()=>{location.reload()}})})}},H=u=>{const c=_.find(h=>h.question_id===u);return c?c.answer:0};let P=0;const R=(u,c)=>{const h={question_id:u,answer:c},j=_.findIndex(L=>L.question_id===h.question_id);j!==-1?_[j].answer=h.answer:_.push(h);try{P%20===0&&S(),localStorage.setItem("indexPage",a.value),localStorage.setItem("myAnswers",JSON.stringify(_)),P++,a.value<Object.keys(d.questionLists).length-1&&T()}catch(L){b.fire({title:"Error",text:"Submit Jawaban Error, silakan lakukan refresh dan pastikan perangkat terhubungan dengan jaringan."+L,icon:"error",showCancelButton:!1,confirmButtonText:"Refresh",allowOutsideClick:!1}).then(V=>{V.isConfirmed&&location.reload()})}},U=x(!1),K=x(!1),S=()=>{N.get("/check-connection").then(u=>{}).catch(u=>{b.fire({title:"Error",text:`Submit Jawaban Error, silakan lakukan refresh dan pastikan perangkat terhubungan dengan jaringan.
`+u,icon:"error",showCancelButton:!1,confirmButtonText:"Refresh",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()})})},Q=(u="")=>{S(),d.section==d.lastSection||u=="block"?B.post(`/user/exams/${d.exam.id}/exam-end`,{exam_id:d.exam.id,grade_id:d.grade.id,myAnswers:_},{onSuccess:()=>{u=="block"?b.fire({title:"UJIAN DIBLOKIR KARENA SUDAH MELEWATI BATAS TOLERANSI.",text:"Anda tidak dapat melanjutkan ujian, silakan hubungi admin",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()}):(localStorage.removeItem("indexPage"),b.fire({title:"Success..",text:"Ujian Anda Selesai, Semoga Mendapatkan Nilai Terbaik.",icon:"success",showCancelButton:!1,confirmButtonText:"Tutup",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()}))}}):(B.get(`/user/exams/${d.exam.id}/grades/${d.grade.id}/sections/${d.section+1}?nextsection=1`),localStorage.removeItem("indexPage"),b.fire({title:"Success!",text:"Lanjut Ke Kolom Berikutnya.",icon:"success",showConfirmButton:!1,timer:1e3}))};return d.exam.total_tolerance!=null&&window.addEventListener("blur",I),d.grade.is_blocked==1&&b.fire({title:"Ujian di Blokir",text:"Masukan Kode Untuk Membuka Blokir",input:"text",icon:"error",inputAttributes:{autocapitalize:"off"},showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Buka Blokir",showLoaderOnConfirm:!0,preConfirm:u=>{N.get(`/user/exams/${d.exam.id}/grades/${d.grade.id}/unblocked`,{params:{token:u}}).then(c=>{c.data.success==!0?b.fire({title:"Blokir Berhasil Dibuka",text:"Silakan Lanjut Mengerjakan Soal.",icon:"success",showCancelButton:!1,confirmButtonText:"Oke",allowOutsideClick:!1}).then(h=>{h.isConfirmed&&location.reload()}):b.fire({title:"Gagal",text:c.data.message,icon:"error",showCancelButton:!1,confirmButtonText:"Ulangi",allowOutsideClick:!1}).then(h=>{h.isConfirmed&&location.reload()})}).catch(c=>{console.error("Request failed:",c),b.showValidationMessage(`Request failed: ${c}`)})}}),{indexPage:a,options:e,duration:k,handleChangeDuration:s,prevPage:g,nextPage:T,clickQuestion:D,submitAnswer:R,getMyAnswer:H,showModalEndExam:U,showModalEndTimeExam:K,endExam:Q,confirm:I,checkConnection:S,loadMath:l}},methods:{transform(d){return Object.entries(d).forEach(([a,t])=>{const e=t<10?`0${t}`:t;d[a]=`${e}`}),d}}},$={class:"container",style:{"margin-top":"20px","margin-bottom":"20px"}},p={class:"row"},ee={class:"card"},te={class:"card-header bg-primary mb-3"},ne={class:"d-flex justify-content-between"},ae={class:"text-start"},ie={key:0},oe={class:"mb-0 text-white"},se={class:"badge"},de={class:"text-end"},le={class:"mb-0 text-white"},re={key:0,class:"badge"},ce={key:1,class:"badge"},ue={class:"card-body"},me={key:0},ge=["innerHTML"],he={key:0},be={width:"50",style:{padding:"10px"}},_e=["onClick"],ke=["onClick"],xe={style:{padding:"10px"}},ye=["innerHTML"],fe={key:1},we={width:"30"},ve=["innerHTML"],Ce={key:1},Ee={key:0,class:"mt-3 mb-3 m-3"},Se=["onClick"],Le=["onClick"],Me={class:"card-footer",style:{"min-height":"60px"}},Ae={class:"d-flex justify-content-center"},Be={class:"text-start"},Te={key:0},Ie={key:0,class:"text-center"},Pe={key:0},je={key:1},qe={class:"card"},Oe={class:"card-body",style:{height:"auto","overflow-y":"auto"}},Ne={style:{width:"20%",float:"left"}},Je={style:{padding:"2px"}},De=["onClick"],He={style:{"font-size":"11px","font-weight":"500"}},Re=["onClick"],Ue={style:{"font-size":"11px","font-weight":"500"}},Ke=["onClick"],Qe={style:{"font-size":"11px","font-weight":"500"}},Ve={class:"card-footer",style:{"min-height":"60px"}},ze={key:0},Ye={key:1},Fe={class:"modal-dialog"},Ge={class:"modal-content"},We={class:"modal-footer"},Xe={class:"modal-dialog"},Ze={class:"modal-content"},$e={class:"modal-header"},pe={key:0,class:"modal-title"},et={key:1,class:"modal-title"},tt={class:"modal-body"},nt={key:0},at={key:1},it={class:"text-center"},ot={class:"mb-0 text-white"},st={class:"badge bg-danger"},dt={key:0,class:"modal-footer"};function lt(d,a,t,e,E,_){const f=J("Head"),k=J("VueCountdown");return o(),i(y,null,[M(f,null,{default:A(()=>{var s;return[n("title",null,`
            `+m((s=d.$page.props.setting.app_name)!=null?s:"Atur Setting Terlebih Dahulu")+`
            - Sesi Ujian
        `,1)]}),_:1}),n("div",$,[n("div",p,[n("div",{class:w(["col-md-12 col-sm-12 col-xs-12",t.exam.show_question_number_navigation==1?"col-lg-8":"col-lg-12"])},[n("div",ee,[n("div",te,[n("div",ne,[n("div",ae,[t.exam.show_question_number==1?(o(),i("div",ie,[n("h4",oe,[n("span",se,"No. "+m(t.questionLists[e.indexPage].navigation_order),1)])])):r("",!0)]),n("div",de,[M(k,{transform:_.transform,time:e.duration,onProgress:e.handleChangeDuration,onEnd:a[0]||(a[0]=s=>e.showModalEndTimeExam=!0)},{default:A(({hours:s,minutes:l,seconds:g})=>[n("h4",le,[t.exam.duration>=60?(o(),i("span",re,m(s)+" : "+m(l)+" : "+m(g),1)):(o(),i("span",ce,m(l)+" : "+m(g),1))])]),_:1},8,["transform","time","onProgress"])])])]),n("div",ue,[t.questionLists[e.indexPage]?(o(),i("div",me,[n("div",null,[n("div",{innerHTML:t.questionLists[e.indexPage].question,class:"prevent-select clearfix"},null,8,ge)]),n("table",null,[t.exam.type_option==1?(o(),i("tbody",he,[(o(!0),i(y,null,v(t.questionLists[e.indexPage].answer_order.split(","),(s,l)=>(o(),i("tr",{key:l},[n("span",null,[n("td",be,[s==e.getMyAnswer(t.questionLists[e.indexPage].question_id)?(o(),i("button",{key:0,onClick:g=>e.submitAnswer(t.questionLists[e.indexPage].question_id,s),class:"btn btn-primary text-white"},m(e.options[l]),9,_e)):(o(),i("button",{key:1,onClick:g=>e.submitAnswer(t.questionLists[e.indexPage].question_id,s),class:"btn btn-outline-primary w-100 no-click-effect"},m(e.options[l]),9,ke))]),n("td",xe,[t.exam.show_answer==1?(o(),i("p",{key:0,class:"prevent-select",innerHTML:t.questionLists[e.indexPage]["option_"+s]},null,8,ye)):r("",!0)])])]))),128))])):r("",!0),t.exam.type_option==2?(o(),i("tbody",fe,[t.exam.show_answer==1?(o(!0),i(y,{key:0},v(t.questionLists[e.indexPage].answer_order.split(","),(s,l)=>(o(),i("tr",{key:l},[n("td",we,[n("p",null,m(e.options[l])+".",1)]),n("td",null,[n("p",{innerHTML:t.questionLists[e.indexPage]["option_"+s]},null,8,ve)])]))),128)):r("",!0)])):r("",!0)])])):(o(),i("div",Ce,[...a[14]||(a[14]=[n("div",{class:"alert alert-danger border-0 shadow"},[n("i",{class:"fa fa-exclamation-triangle"}),C(" Question Not Found!. ")],-1)])]))]),t.exam.type_option==2?(o(),i("div",Ee,[(o(!0),i(y,null,v(t.questionLists[e.indexPage].answer_order.split(","),(s,l)=>(o(),i("span",{key:l},[s==e.getMyAnswer(t.questionLists[e.indexPage].question_id)?(o(),i("button",{key:0,onClick:g=>e.submitAnswer(t.questionLists[e.indexPage].question_id,s),class:"btn btn-secondary text-dark px-lg-5 px-md-5 mb-1 mx-1 rounded-3 no-click-effect-section",style:{"background-color":"#ccc"}},m(e.options[l]),9,Se)):(o(),i("button",{key:1,onClick:g=>e.submitAnswer(t.questionLists[e.indexPage].question_id,s),class:"btn btn-secondary px-lg-5 px-md-5 mb-1 rounded-3 mx-1 text-dark no-click-effect-section",style:{"background-color":"#ccc"}},m(e.options[l]),9,Le))]))),128))])):r("",!0),n("div",Me,[n("div",Ae,[n("div",Be,[t.exam.show_prev_next_button==1?(o(),i("div",Te,[e.indexPage>0?(o(),i("button",{key:0,onClick:a[1]||(a[1]=s=>e.prevPage()),type:"button",class:"btn btn-danger btn-md border-0 shadow",style:{width:"9vh"}}," << ")):r("",!0),a[15]||(a[15]=C(" \xA0 ",-1)),e.indexPage<Object.keys(t.questionLists).length-1?(o(),i("button",{key:1,onClick:a[2]||(a[2]=s=>e.nextPage()),type:"button",class:"btn btn-danger btn-md border-0 shadow",style:{width:"9vh"}}," >> ")):r("",!0)])):r("",!0)]),t.exam.show_question_number_navigation==0?(o(),i("div",Ie,[t.exam.button_type_finish==1?(o(),i("div",Pe,[t.section==t.lastSection?(o(),i("button",{key:0,onClick:a[3]||(a[3]=s=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"}," Akhiri Try Out ")):(o(),i("button",{key:1,onClick:a[4]||(a[4]=(...s)=>e.endExam&&e.endExam(...s)),class:"btn btn-danger btn-md border-0 shadow w-100"}," Lanjut Bagian Berikutnya "))])):(o(),i("div",je,[t.section==t.lastSection&&e.indexPage>=Object.keys(t.questionLists).length-1?(o(),i("button",{key:0,onClick:a[5]||(a[5]=s=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"}," Akhiri Try Out ")):r("",!0),t.section<t.lastSection&&e.indexPage>=Object.keys(t.questionLists).length-1?(o(),i("button",{key:1,onClick:a[6]||(a[6]=(...s)=>e.endExam&&e.endExam(...s)),class:"btn btn-danger btn-md border-0 shadow w-100"}," Lanjut Bagian Berikutnya ")):r("",!0)]))])):r("",!0)])])])],2),t.exam.show_question_number_navigation==1?(o(),i("div",{key:0,class:w(["col-md-12 col-sm-12 col-xs-12",{"col-lg-4":t.exam.show_question_number_navigation==1}])},[n("div",qe,[a[16]||(a[16]=n("div",{class:"card-header text-white bg-primary"},[n("div",{class:"d-flex justify-content-between"},[n("div",null,[n("h5",{class:"mb-0 text-white"},"Navigasi Soal")])])],-1)),n("div",Oe,[(o(!0),i(y,null,v(t.questionLists,(s,l)=>(o(),i("div",{key:l},[n("div",Ne,[n("div",Je,[l==e.indexPage?(o(),i("button",{key:0,onClick:g=>e.clickQuestion(l),class:"btn btn-primary w-100"},[n("span",He,m(s.navigation_order),1)],8,De)):r("",!0),l!=e.indexPage&&e.getMyAnswer(s.question_id)==0?(o(),i("button",{key:1,onClick:g=>e.clickQuestion(l),class:"btn btn-light w-100"},[n("span",Ue,m(s.navigation_order),1)],8,Re)):r("",!0),l!=e.indexPage&&e.getMyAnswer(s.question_id)!=0?(o(),i("button",{key:2,onClick:g=>e.clickQuestion(l),class:"btn btn-danger w-100"},[n("span",Qe,m(s.navigation_order),1)],8,Ke)):r("",!0)])])]))),128))]),n("div",Ve,[t.exam.button_type_finish==1?(o(),i("div",ze,[t.section==t.lastSection?(o(),i("button",{key:0,onClick:a[7]||(a[7]=s=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"}," Akhiri Try Out ")):(o(),i("button",{key:1,onClick:a[8]||(a[8]=(...s)=>e.endExam&&e.endExam(...s)),class:"btn btn-danger btn-md border-0 shadow w-100"}," Lanjut Bagian Berikutnya "))])):(o(),i("div",Ye,[t.section==t.lastSection&&e.indexPage>=Object.keys(t.questionLists).length-1?(o(),i("button",{key:0,onClick:a[9]||(a[9]=s=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"}," Akhiri Try Out ")):r("",!0),t.section<t.lastSection&&e.indexPage>=Object.keys(t.questionLists).length-1?(o(),i("button",{key:1,onClick:a[10]||(a[10]=(...s)=>e.endExam&&e.endExam(...s)),class:"btn btn-danger btn-md border-0 shadow w-100"}," Lanjut Bagian Berikutnya ")):r("",!0)]))])])],2)):r("",!0)])]),e.showModalEndExam?(o(),i("div",{key:0,class:w(["modal fade",{show:e.showModalEndExam}]),tabindex:"-1","aria-hidden":"true",style:{display:"block"},role:"dialog"},[n("div",Fe,[n("div",Ge,[a[17]||(a[17]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title"},"Akhiri Try Out ?")],-1)),a[18]||(a[18]=n("div",{class:"modal-body"}," Setelah mengakhiri Try Out, Anda tidak dapat kembali ke Try Out ini lagi. Yakin akan mengakhiri Try Out? ",-1)),n("div",We,[n("button",{onClick:a[11]||(a[11]=(...s)=>e.endExam&&e.endExam(...s)),type:"button",class:"btn btn-danger",style:{width:"6rem"}}," Ya "),n("button",{onClick:a[12]||(a[12]=s=>e.showModalEndExam=!1),type:"button",class:"btn btn-secondary",style:{width:"6rem"}}," Tidak ")])])])],2)):r("",!0),e.showModalEndTimeExam?(o(),i("div",{key:1,class:w(["modal fade",{show:e.showModalEndTimeExam}]),"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",style:{display:"block","z-index":"9999"},role:"dialog"},[n("div",Xe,[n("div",Ze,[n("div",$e,[t.section==t.lastSection?(o(),i("h5",pe," Waktu Habis ! ")):(o(),i("h5",et," Lanjut ke bagian selanjutnya dalam hitungan : "))]),n("div",tt,[t.section==t.lastSection?(o(),i("div",nt,[...a[19]||(a[19]=[C(" Waktu Try Out sudah berakhir!. Klik ",-1),n("strong",{class:"fw-bold"},"Ya",-1),C(" untuk mengakhiri Try Out. ",-1)])])):(o(),i("div",at,[n("div",it,[M(k,{time:5e3,onProgress:e.handleChangeDuration,onEnd:e.endExam},{default:A(({hours:s,minutes:l,seconds:g})=>[n("h2",ot,[n("span",st,m(g),1)])]),_:1},8,["onProgress","onEnd"])])]))]),t.section==t.lastSection?(o(),i("div",dt,[n("button",{onClick:a[13]||(a[13]=(...s)=>e.endExam&&e.endExam(...s)),type:"button",class:"btn btn-primary"}," Ya ")])):r("",!0)])])],2)):r("",!0)],64)}const bt=X(Z,[["render",lt]]);export{bt as default};
