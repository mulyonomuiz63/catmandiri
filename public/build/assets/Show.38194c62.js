import{L as h}from"./Layout.4d67cb95.js";import{l as w,h as T,k as x,r as u,c as o,a as d,w as r,b as s,d as S,f as l,x as L,F as _,e as y,i as g,o as e,t as c,g as p}from"./app.5ad37d3c.js";import{S as P}from"./sweetalert2.esm.all.5c9cd675.js";import{_ as K}from"./_plugin-vue_export-helper.cdc0426e.js";const M={layout:h,components:{Link:w,Head:T},props:{errors:Object,transaction:Object,banks:Object},setup(n){const t=x({payment_method:""});return{form:t,submit:()=>{g.post(`/user/vouchers/${n.voucher.id}/buy`,{payment_method:t.payment_method},{onSuccess:()=>{P.fire({title:"Success!",text:"Silakan Lakukan Pembayaran",icon:"success",showConfirmButton:!1,timer:1e3})}})},pay:()=>{window.snap.pay(n.transaction.snap_token,{onSuccess:()=>{g.post("/user/transactions/pay",{transaction_id:n.transaction.id,payment_method:"automatic_transfer_midtrans"})},onPending:()=>{this.$inertia.visit($page.props.setting.app_url)},onError:()=>{this.$inertia.visit($page.props.setting.app_url)}})}}},methods:{formatPrice(n){return"Rp."+(n/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},B={class:"page-wrapper"},H={class:"page-content"},C={class:"row"},D={class:"col-lg-12"},N={key:0,class:"alert alert-danger border-0 alert-dismissible fade show"},V=["innerHTML"],j={key:1,class:"alert alert-danger border-0 alert-dismissible fade show"},A=["innerHTML"],O={key:2,class:"alert alert-success border-0 alert-dismissible fade show"},E=["innerHTML"],F={class:"col-lg-12"},R={class:"card border-top border-0 border-3 border-primary"},G={class:"card-header"},J={class:"d-lg-flex align-items-center"},U={class:"ms-auto"},W={class:"card-body p-4"},q={class:"row mb-3"},z={class:"col-sm-9"},I=["value"],Q={class:"row mb-3"},X={class:"col-sm-9"},Y=["value"],Z={class:"row mb-3"},$={class:"col-sm-9"},ss=["value"],ts={class:"row mb-3"},as={class:"col-sm-9"},es=["value"],os={class:"row mb-3"},ns={class:"col-sm-9"},ls=["value"],is={class:"row mb-3"},rs={class:"col-sm-9"},cs=["value"],ds={class:"row mb-3"},ms={class:"col-sm-9"},us=["value"],_s={class:"row mb-3"},bs={class:"col-sm-9"},fs={class:"badge bg-success m-1"},vs={key:1,class:"badge bg-success"},ys={class:"row mb-3"},gs={class:"col-sm-9"},ps={class:"form-select",disabled:"",style:{"background-color":"#fff"}},ks=["selected"],hs=["selected"],ws=["selected"],Ts={class:"row mb-3"},xs={class:"col-sm-9"},Ss=["value"],Ls={class:"row mb-3"},Ps={class:"col-sm-9"},Ks={key:0,class:"fw-bold"},Ms={key:1,class:"fw-bold"},Bs={key:2,class:"fw-bold"},Hs={key:3,class:"fw-bold"},Cs={key:4,class:"fw-bold"},Ds={key:0,class:"row mb-3"},Ns={class:"col-sm-9"},Vs={key:1},js={class:"row mb-3"},As={class:"col-sm-9"},Os=["value"],Es={class:"row mb-3"},Fs={class:"col-sm-9"},Rs=["value"],Gs={class:"row mb-3"},Js={class:"col-sm-9"},Us=["value"],Ws={class:"row mb-3"},qs={class:"col-sm-9"},zs=["value"],Is={class:"row mb-3"},Qs={class:"col-sm-9"},Xs=["src"],Ys={key:2,class:"row"},Zs={class:"col-lg-12"},$s={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-3"},st={class:"col"},tt={class:"card"},at={style:{height:"75px"}},et=["src"],ot={class:"card-body"},nt={class:"card-title"},lt={class:"card-text"},it={class:"card-text"};function rt(n,t,a,m,ct,b){const k=u("Head"),f=u("Link"),v=u("center");return e(),o(_,null,[d(k,null,{default:r(()=>{var i;return[s("title",null,`
            `+c((i=n.$page.props.setting.app_name)!=null?i:"Atur Setting Terlebih Dahulu")+`
            - Transaksi
        `,1)]}),_:1}),s("div",B,[s("div",H,[t[28]||(t[28]=S('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page"> Detail Transaksi </li></ol></nav></div></div>',1)),s("div",C,[s("div",D,[n.$page.props.session.failed?(e(),o("div",N,[s("div",{innerHTML:n.$page.props.session.failed},null,8,V),t[1]||(t[1]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):l("",!0),n.$page.props.session.error?(e(),o("div",j,[s("div",{innerHTML:n.$page.props.session.error},null,8,A),t[2]||(t[2]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):l("",!0),n.$page.props.session.success?(e(),o("div",O,[s("div",{innerHTML:n.$page.props.session.success},null,8,E),t[3]||(t[3]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):l("",!0)]),s("div",F,[s("div",R,[s("div",G,[s("div",J,[s("div",U,[a.transaction.transaction_status=="pending"&&a.transaction.payment_method=="manual_transfer"?(e(),L(f,{key:0,href:`/user/transactions/${a.transaction.id}/payment-confirmations`,class:"btn btn-danger btn-sm mt-lg-0 mx-1"},{default:r(()=>[...t[4]||(t[4]=[p("Konfirmasi Pembayaran",-1)])]),_:1},8,["href"])):l("",!0),d(f,{href:"/user/transactions",class:"btn btn-primary btn-sm mt-lg-0"},{default:r(()=>[...t[5]||(t[5]=[p("Kembali ",-1)])]),_:1})])])]),s("div",W,[t[26]||(t[26]=s("h5",{class:"mb-3"},"Data Pembeli",-1)),s("div",q,[t[6]||(t[6]=s("label",{class:"col-sm-3 col-form-label"},"Nama Lengkap",-1)),s("div",z,[s("input",{type:"text",class:"form-control",value:a.transaction.user.name,disabled:"",style:{"background-color":"#fff"}},null,8,I)])]),s("div",Q,[t[7]||(t[7]=s("label",{class:"col-sm-3 col-form-label"},"Email",-1)),s("div",X,[s("input",{type:"text",class:"form-control",value:a.transaction.user.email,disabled:"",style:{"background-color":"#fff"}},null,8,Y)])]),s("div",Z,[t[8]||(t[8]=s("label",{class:"col-sm-3 col-form-label"},"Nomor Telepon (Whatsapp)",-1)),s("div",$,[s("input",{type:"text",class:"form-control",value:a.transaction.user.student&&a.transaction.user.student.phone_number?a.transaction.user.student.phone_number:"-",disabled:"",style:{"background-color":"#fff"}},null,8,ss)])]),t[27]||(t[27]=s("h5",{class:"mb-3"},"Detail Transaksi",-1)),s("div",ts,[t[9]||(t[9]=s("label",{class:"col-sm-3 col-form-label"},"Kode Transaksi",-1)),s("div",as,[s("input",{type:"text",class:"form-control",value:a.transaction.code,disabled:"",style:{"background-color":"#fff"}},null,8,es)])]),s("div",os,[t[10]||(t[10]=s("label",{class:"col-sm-3 col-form-label"},"Tanggal Transaksi",-1)),s("div",ns,[s("input",{type:"text",class:"form-control",value:a.transaction.created_at,disabled:"",style:{"background-color":"#fff"}},null,8,ls)])]),s("div",is,[t[11]||(t[11]=s("label",{class:"col-sm-3 col-form-label"},"Kategori Peminatan",-1)),s("div",rs,[s("input",{type:"text",class:"form-control",value:a.transaction.category.name,disabled:"",style:{"background-color":"#fff"}},null,8,cs)])]),s("div",ds,[t[12]||(t[12]=s("label",{class:"col-sm-3 col-form-label"},"Deskripsi Transaksi",-1)),s("div",ms,[s("input",{type:"text",class:"form-control",value:a.transaction.description,disabled:"",style:{"background-color":"#fff"}},null,8,us)])]),s("div",_s,[t[13]||(t[13]=s("label",{class:"col-sm-3 col-form-label"},"Kategori Member",-1)),s("div",bs,[a.transaction.member_categories?(e(!0),o(_,{key:0},y(a.transaction.member_categories,i=>(e(),o("span",fs,c(i),1))),256)):(e(),o("span",vs,"Untuk Seluruh Kategori Member"))])]),s("div",ys,[t[14]||(t[14]=s("label",{class:"col-sm-3 col-form-label"},"Metode Pembayaran",-1)),s("div",gs,[s("select",ps,[s("option",{value:"account_balance",selected:a.transaction.payment_method=="account_balance"}," Saldo Akun ",8,ks),s("option",{value:"manual_transfer",selected:a.transaction.payment_method=="manual_transfer"}," Transfer Manual (Konfirmasi Pembayaran) ",8,hs),s("option",{value:"automatic_transfer_midtrans",selected:a.transaction.payment_method=="automatic_transfer_midtrans"}," Transfer Otomatis ",8,ws)])])]),s("div",Ts,[t[15]||(t[15]=s("label",{class:"col-sm-3 col-form-label"},"Total Transaksi",-1)),s("div",xs,[s("input",{type:"text",class:"form-control",value:b.formatPrice(a.transaction.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,Ss)])]),s("div",Ls,[t[16]||(t[16]=s("label",{class:"col-sm-3 col-form-label"},"Status Transaksi",-1)),s("div",Ps,[a.transaction.transaction_status=="pending"?(e(),o("span",Ks,"Pending - Belum melakukan pembayaran")):l("",!0),a.transaction.transaction_status=="paid"?(e(),o("span",Ms,"Telah melakukan pembayaran")):l("",!0),a.transaction.transaction_status=="failed"?(e(),o("span",Bs,"Transaksi Gagal")):l("",!0),a.transaction.transaction_status=="done"?(e(),o("span",Hs,"Transaksi Selesai")):l("",!0),a.transaction.transaction_status=="expired"?(e(),o("span",Cs,"Transaksi Kadaluarsa")):l("",!0)])]),a.transaction.payment_method=="automatic_transfer_midtrans"&&a.transaction.transaction_status=="pending"?(e(),o("div",Ds,[t[17]||(t[17]=s("label",{class:"col-sm-3 col-form-label"},"Action",-1)),s("div",Ns,[s("button",{onClick:t[0]||(t[0]=(...i)=>m.pay&&m.pay(...i)),class:"btn btn-primary btn-sm"}," Bayar Transaksi Sekarang ")])])):l("",!0),a.transaction.payment_method=="manual_transfer"&&a.transaction.payment_confirmation?(e(),o("div",Vs,[t[23]||(t[23]=s("h5",{class:"mb-3"},"Data Konfirmasi Pembayaran",-1)),s("div",js,[t[18]||(t[18]=s("label",{class:"col-sm-3 col-form-label"},"Nama Pengirim Transfer",-1)),s("div",As,[s("input",{type:"text",class:"form-control",value:a.transaction.payment_confirmation.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,Os)])]),s("div",Es,[t[19]||(t[19]=s("label",{class:"col-sm-3 col-form-label"},"Di Transfer Ke Rekening",-1)),s("div",Fs,[s("input",{type:"text",class:"form-control",value:a.transaction.payment_confirmation.bank.bank_name+" - "+a.transaction.payment_confirmation.bank.rekening_number+" - "+a.transaction.payment_confirmation.bank.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,Rs)])]),s("div",Gs,[t[20]||(t[20]=s("label",{class:"col-sm-3 col-form-label"},"Tanggal Transfer",-1)),s("div",Js,[s("input",{type:"text",class:"form-control",value:a.transaction.payment_confirmation.transfer_date,disabled:"",style:{"background-color":"#fff"}},null,8,Us)])]),s("div",Ws,[t[21]||(t[21]=s("label",{class:"col-sm-3 col-form-label"},"Jumlah Transfer",-1)),s("div",qs,[s("input",{type:"text",class:"form-control",value:b.formatPrice(a.transaction.payment_confirmation.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,zs)])]),s("div",Is,[t[22]||(t[22]=s("label",{class:"col-sm-3 col-form-label"},"Bukti Transfer",-1)),s("div",Qs,[s("img",{src:"/storage/upload_files/payment_confirmation/"+a.transaction.payment_confirmation.file,style:{width:"300px"}},null,8,Xs)])])])):l("",!0),a.transaction.payment_method=="manual_transfer"&&a.transaction.transaction_status=="pending"?(e(),o("div",Ys,[s("div",Zs,[t[24]||(t[24]=s("h6",{class:"text-center"}," Silakan lakukan pembayaran melalui rekening berikut ini dan lakukan konfirmasi ",-1)),t[25]||(t[25]=s("br",null,null,-1)),s("div",$s,[(e(!0),o(_,null,y(a.banks,i=>(e(),o("div",st,[s("div",tt,[s("div",at,[d(v,null,{default:r(()=>[s("img",{src:"/storage/upload_files/banks/"+i.image,style:{width:"125px","margin-top":"20px"}},null,8,et)]),_:2},1024)]),s("div",ot,[d(v,null,{default:r(()=>[s("h5",nt,c(i.bank_name),1),s("p",lt,c(i.rekening_number),1),s("p",it,[s("b",null,c(i.rekening_name),1)])]),_:2},1024)])])]))),256))])])])):l("",!0)])])])])])])],64)}const bt=K(M,[["render",rt]]);export{bt as default};
