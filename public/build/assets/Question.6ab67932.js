import{L as z,i as Y}from"./vue-countdown.esm.2adcfdd8.js";import{p as F,e as q,t as I}from"./index.es.915a182a.js";import{a as N}from"./index.4bece78e.js";import{h as G,l as W,D as x,r as J,c as o,a as M,w as A,b as n,n as w,t as m,f as r,F as y,e as v,g as C,i as B,o as i}from"./app.5ad37d3c.js";import{S as b}from"./sweetalert2.esm.all.5c9cd675.js";import{_ as X}from"./_plugin-vue_export-helper.cdc0426e.js";const Z={layout:z,components:{Head:G,Link:W,VueCountdown:Y,MathJax:F},props:{id:String,page:Number,exam:Object,duration:Object,questionLists:Object,section:Number,lastSection:Number,grade:Object,indexPage:Object},mounted(){let d=document.createElement("script");d.setAttribute("src","https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"),document.head.appendChild(d);function a(){const e=document.getElementById("elementId");I(e)}q({},a)},setup(d){var a,e=localStorage.getItem("indexPage");e!==null?a=x(e):a=x(d.indexPage);let t=["A","B","C","D","E"];d.exam.id!=localStorage.getItem("examId")&&(localStorage.setItem("examId",d.exam.id),localStorage.setItem("myAnswers",[]));const E=localStorage.getItem("myAnswers");let _=E?JSON.parse(E):[];localStorage.setItem("myAnswers",JSON.stringify(_)),localStorage.setItem("examId",d.exam.id);const f=x(0),k=x(d.duration),s=()=>{k.value=k.value-1e3,f.value=f.value+1},l=()=>{let u=document.createElement("script");u.setAttribute("src","https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"),document.head.appendChild(u);function c(){const h=document.getElementById("elementId");I(h)}q({},c)},g=()=>{l(),a.value=parseInt(a.value)-1},T=()=>{l(),a.value=parseInt(a.value)+1},D=u=>{l(),a.value=u},j=()=>{if(d.grade.is_blocked!=1){let u=parseInt(d.grade.total_tolerance)>0?parseInt(d.grade.total_tolerance)-1:0,c=u==0?"Tolerasi habis, ":"Toleransi Tersisa "+u+" kali lagi, ";b.fire({title:"UJIAN AKAN DI DIBLOKIR JIKA ANDA MENINGGAL SESI UJIAN",text:c+" jika toleransi habis anda tidak dapat melanjutkan ujian dan harus menghubungi admin",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",cancelButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1}).then(h=>{h.isConfirmed&&B.post(`/user/exam-groups/${d.exam.id}/decrement-tolerance`,{grade_id:d.grade.id},{onSuccess:()=>{location.reload()}})})}},H=u=>{const c=_.find(h=>h.question_id===u);return c?c.answer:0};let O=0;const R=(u,c)=>{const h={question_id:u,answer:c},P=_.findIndex(S=>S.question_id===h.question_id);P!==-1?_[P].answer=h.answer:_.push(h);try{O%20===0&&L(),localStorage.setItem("indexPage",a.value),localStorage.setItem("myAnswers",JSON.stringify(_)),O++,a.value<Object.keys(d.questionLists).length-1&&T()}catch(S){b.fire({title:"Error",text:"Submit Jawaban Error, silakan lakukan refresh dan pastikan perangkat terhubungan dengan jaringan."+S,icon:"error",showCancelButton:!1,confirmButtonText:"Refresh",allowOutsideClick:!1}).then(V=>{V.isConfirmed&&location.reload()})}},K=x(!1),U=x(!1),L=()=>{N.get("/check-connection").then(u=>{console.log("ada")}).catch(u=>{b.fire({title:"Error",text:`Submit Jawaban Error, silakan lakukan refresh dan pastikan perangkat terhubungan dengan jaringan.
`+u,icon:"error",showCancelButton:!1,confirmButtonText:"Refresh",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()})})},Q=(u="")=>{L(),d.section==d.lastSection||u=="block"?B.post(`/user/exam-groups/${d.exam.id}/exam-end`,{exam_id:d.exam.id,grade_id:d.grade.id,myAnswers:_},{onSuccess:()=>{u=="block"?b.fire({title:"UJIAN DIBLOKIR KARENA SUDAH MELEWATI BATAS TOLERANSI.",text:"Anda tidak dapat melanjutkan ujian, silakan hubungi admin",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()}):(localStorage.removeItem("indexPage"),b.fire({title:"Success..",text:"Ujian Anda Selesai, Semoga Mendapatkan Nilai Terbaik.",icon:"success",showCancelButton:!1,confirmButtonText:"Tutup",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()}))}}):(B.get(`/user/exam-groups/${d.exam.id}/grades/${d.grade.id}/sections/${d.section+1}?nextsection=1`),localStorage.removeItem("indexPage"),b.fire({title:"Success!",text:"Lanjut Ke Kolom Berikutnya.",icon:"success",showConfirmButton:!1,timer:1e3}))};return d.exam.total_tolerance!=null&&window.addEventListener("blur",j),d.grade.is_blocked==1&&b.fire({title:"Ujian di Blokir",text:"Masukan Kode Untuk Membuka Blokir",input:"password",icon:"error",inputAttributes:{autocapitalize:"off"},showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Buka Blokir",showLoaderOnConfirm:!0,preConfirm:u=>{N.get(`/user/exam-groups/${d.exam.id}/grades/${d.grade.id}/unblocked`,{params:{token:u}}).then(c=>{c.data.success==!0?b.fire({title:"Blokir Berhasil Dibuka",text:"Silakan Lanjut Mengerjakan Soal.",icon:"success",showCancelButton:!1,confirmButtonText:"Oke",allowOutsideClick:!1}).then(h=>{h.isConfirmed&&location.reload()}):b.fire({title:"Gagal",text:c.data.message,icon:"error",showCancelButton:!1,confirmButtonText:"Ulangi",allowOutsideClick:!1}).then(h=>{h.isConfirmed&&location.reload()})}).catch(c=>{console.error("Request failed:",c),b.showValidationMessage(`Request failed: ${c}`)})}}),{indexPage:a,options:t,duration:k,handleChangeDuration:s,prevPage:g,nextPage:T,clickQuestion:D,submitAnswer:R,getMyAnswer:H,showModalEndExam:K,showModalEndTimeExam:U,endExam:Q,confirm:j,checkConnection:L,loadMath:l}},methods:{transform(d){return Object.entries(d).forEach(([a,e])=>{const t=e<10?`0${e}`:e;d[a]=`${t}`}),d}}},p={class:"container",style:{"margin-top":"20px","margin-bottom":"20px"}},$={class:"row"},tt={class:"card"},et={class:"card-header bg-primary mb-3"},nt={class:"d-flex justify-content-between"},at={class:"text-start"},ot={key:0},it={class:"mb-0 text-white"},st={class:"badge"},dt={class:"text-end"},lt={class:"mb-0 text-white"},rt={key:0,class:"badge"},ct={key:1,class:"badge"},ut={class:"card-body"},mt={key:0},gt=["innerHTML"],ht={key:0},bt={width:"50",style:{padding:"10px"}},_t=["onClick"],kt=["onClick"],xt={style:{padding:"10px"}},yt=["innerHTML"],ft={key:1},wt={width:"30"},vt=["innerHTML"],Ct={key:1},Et={key:0,class:"mt-3 mb-3 m-3"},Lt=["onClick"],St=["onClick"],Mt={class:"card-footer",style:{"min-height":"60px"}},At={class:"d-flex justify-content-center"},Bt={class:"text-start"},Tt={key:0},jt={key:0,class:"text-center"},Ot={key:0},Pt={key:1},qt={class:"card"},It={class:"card-body",style:{height:"480px","overflow-y":"auto"}},Nt={style:{width:"20%",float:"left"}},Jt={style:{padding:"2px"}},Dt=["onClick"],Ht={style:{"font-size":"11px","font-weight":"500"}},Rt=["onClick"],Kt={style:{"font-size":"11px","font-weight":"500"}},Ut=["onClick"],Qt={style:{"font-size":"11px","font-weight":"500"}},Vt={class:"card-footer",style:{"min-height":"60px"}},zt={key:0},Yt={key:1},Ft={class:"modal-dialog"},Gt={class:"modal-content"},Wt={class:"modal-footer"},Xt={class:"modal-dialog"},Zt={class:"modal-content"},pt={class:"modal-header"},$t={key:0,class:"modal-title"},te={key:1,class:"modal-title"},ee={class:"modal-body"},ne={key:0},ae={key:1},oe={class:"text-center"},ie={class:"mb-0 text-white"},se={class:"badge bg-danger"},de={key:0,class:"modal-footer"};function le(d,a,e,t,E,_){const f=J("Head"),k=J("VueCountdown");return i(),o(y,null,[M(f,null,{default:A(()=>{var s;return[n("title",null,`
            `+m((s=d.$page.props.setting.app_name)!=null?s:"Atur Setting Terlebih Dahulu")+`
            - Try Out
        `,1)]}),_:1}),n("div",p,[n("div",$,[n("div",{class:w(["col-md-12 col-sm-12 col-xs-12",e.exam.show_question_number_navigation==1?"col-lg-8":"col-lg-12"])},[n("div",tt,[n("div",et,[n("div",nt,[n("div",at,[e.exam.show_question_number==1?(i(),o("div",ot,[n("h4",it,[n("span",st,"No. "+m(e.questionLists[t.indexPage].navigation_order),1)])])):r("",!0)]),n("div",dt,[M(k,{transform:_.transform,time:t.duration,onProgress:t.handleChangeDuration,onEnd:a[0]||(a[0]=s=>t.showModalEndTimeExam=!0)},{default:A(({hours:s,minutes:l,seconds:g})=>[n("h4",lt,[e.exam.duration>=60?(i(),o("span",rt,m(s)+" : "+m(l)+" : "+m(g),1)):(i(),o("span",ct,m(l)+" : "+m(g),1))])]),_:1},8,["transform","time","onProgress"])])])]),n("div",ut,[e.questionLists[t.indexPage]?(i(),o("div",mt,[n("div",null,[n("div",{innerHTML:e.questionLists[t.indexPage].question,class:"prevent-select"},null,8,gt)]),n("table",null,[e.exam.type_option==1?(i(),o("tbody",ht,[(i(!0),o(y,null,v(e.questionLists[t.indexPage].answer_order.split(","),(s,l)=>(i(),o("tr",{key:l},[n("span",null,[n("td",bt,[s==t.getMyAnswer(e.questionLists[t.indexPage].question_id)?(i(),o("button",{key:0,onClick:g=>t.submitAnswer(e.questionLists[t.indexPage].question_id,s),class:"btn btn-danger text-white"},m(t.options[l]),9,_t)):(i(),o("button",{key:1,onClick:g=>t.submitAnswer(e.questionLists[t.indexPage].question_id,s),class:"btn btn-outline-primary w-100 no-click-effect"},m(t.options[l]),9,kt))]),n("td",xt,[e.exam.show_answer==1?(i(),o("p",{key:0,class:"prevent-select",innerHTML:e.questionLists[t.indexPage]["option_"+s]},null,8,yt)):r("",!0)])])]))),128))])):r("",!0),e.exam.type_option==2?(i(),o("tbody",ft,[e.exam.show_answer==1?(i(!0),o(y,{key:0},v(e.questionLists[t.indexPage].answer_order.split(","),(s,l)=>(i(),o("tr",{key:l},[n("td",wt,[n("p",null,m(t.options[l])+".",1)]),n("td",null,[n("p",{innerHTML:e.questionLists[t.indexPage]["option_"+s]},null,8,vt)])]))),128)):r("",!0)])):r("",!0)])])):(i(),o("div",Ct,[...a[14]||(a[14]=[n("div",{class:"alert alert-danger border-0 shadow"},[n("i",{class:"fa fa-exclamation-triangle"}),C(" Question Not Found!. ")],-1)])]))]),e.exam.type_option==2?(i(),o("div",Et,[(i(!0),o(y,null,v(e.questionLists[t.indexPage].answer_order.split(","),(s,l)=>(i(),o("span",{key:l},[s==t.getMyAnswer(e.questionLists[t.indexPage].question_id)?(i(),o("button",{key:0,onClick:g=>t.submitAnswer(e.questionLists[t.indexPage].question_id,s),class:"btn btn-secondary text-dark px-lg-5 px-md-5 mb-1 mx-1 rounded-3 no-click-effect-section",style:{"background-color":"#ccc"}},m(t.options[l]),9,Lt)):(i(),o("button",{key:1,onClick:g=>t.submitAnswer(e.questionLists[t.indexPage].question_id,s),class:"btn btn-secondary px-lg-5 px-md-5 mb-1 rounded-3 mx-1 text-dark no-click-effect-section",style:{"background-color":"#ccc"}},m(t.options[l]),9,St))]))),128))])):r("",!0),n("div",Mt,[n("div",At,[n("div",Bt,[e.exam.show_prev_next_button==1?(i(),o("div",Tt,[t.indexPage>0?(i(),o("button",{key:0,onClick:a[1]||(a[1]=s=>t.prevPage()),type:"button",class:"btn btn-danger btn-md border-0 shadow",style:{width:"9vh"}}," << ")):r("",!0),a[15]||(a[15]=C(" \xA0 ",-1)),t.indexPage<Object.keys(e.questionLists).length-1?(i(),o("button",{key:1,onClick:a[2]||(a[2]=s=>t.nextPage()),type:"button",class:"btn btn-danger btn-md border-0 shadow",style:{width:"9vh"}}," >> ")):r("",!0)])):r("",!0)]),e.exam.show_question_number_navigation==0?(i(),o("div",jt,[e.exam.button_type_finish==1?(i(),o("div",Ot,[e.section==e.lastSection?(i(),o("button",{key:0,onClick:a[3]||(a[3]=s=>t.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"}," Akhiri Try Out ")):(i(),o("button",{key:1,onClick:a[4]||(a[4]=(...s)=>t.endExam&&t.endExam(...s)),class:"btn btn-danger btn-md border-0 shadow w-100"}," Lanjut Bagian Berikutnya "))])):(i(),o("div",Pt,[e.section==e.lastSection&&t.indexPage>=Object.keys(e.questionLists).length-1?(i(),o("button",{key:0,onClick:a[5]||(a[5]=s=>t.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"}," Akhiri Try Out ")):r("",!0),e.section<e.lastSection&&t.indexPage>=Object.keys(e.questionLists).length-1?(i(),o("button",{key:1,onClick:a[6]||(a[6]=(...s)=>t.endExam&&t.endExam(...s)),class:"btn btn-danger btn-md border-0 shadow w-100"}," Lanjut Bagian Berikutnya ")):r("",!0)]))])):r("",!0)])])])],2),e.exam.show_question_number_navigation==1?(i(),o("div",{key:0,class:w(["col-md-12 col-sm-12 col-xs-12",{"col-lg-4":e.exam.show_question_number_navigation==1}])},[n("div",qt,[a[16]||(a[16]=n("div",{class:"card-header text-white bg-primary"},[n("div",{class:"d-flex justify-content-between"},[n("div",null,[n("h5",{class:"mb-0 text-white"},"Navigasi Soal")])])],-1)),n("div",It,[(i(!0),o(y,null,v(e.questionLists,(s,l)=>(i(),o("div",{key:l},[n("div",Nt,[n("div",Jt,[l==t.indexPage?(i(),o("button",{key:0,onClick:g=>t.clickQuestion(l),class:"btn btn-primary w-100"},[n("span",Ht,m(s.navigation_order),1)],8,Dt)):r("",!0),l!=t.indexPage&&t.getMyAnswer(s.question_id)==0?(i(),o("button",{key:1,onClick:g=>t.clickQuestion(l),class:"btn btn-light w-100"},[n("span",Kt,m(s.navigation_order),1)],8,Rt)):r("",!0),l!=t.indexPage&&t.getMyAnswer(s.question_id)!=0?(i(),o("button",{key:2,onClick:g=>t.clickQuestion(l),class:"btn btn-danger w-100"},[n("span",Qt,m(s.navigation_order),1)],8,Ut)):r("",!0)])])]))),128))]),n("div",Vt,[e.exam.button_type_finish==1?(i(),o("div",zt,[e.section==e.lastSection?(i(),o("button",{key:0,onClick:a[7]||(a[7]=s=>t.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"}," Akhiri Try Out ")):(i(),o("button",{key:1,onClick:a[8]||(a[8]=(...s)=>t.endExam&&t.endExam(...s)),class:"btn btn-danger btn-md border-0 shadow w-100"}," Lanjut Bagian Berikutnya "))])):(i(),o("div",Yt,[e.section==e.lastSection&&t.indexPage>=Object.keys(e.questionLists).length-1?(i(),o("button",{key:0,onClick:a[9]||(a[9]=s=>t.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"}," Akhiri Try Out ")):r("",!0),e.section<e.lastSection&&t.indexPage>=Object.keys(e.questionLists).length-1?(i(),o("button",{key:1,onClick:a[10]||(a[10]=(...s)=>t.endExam&&t.endExam(...s)),class:"btn btn-danger btn-md border-0 shadow w-100"}," Lanjut Bagian Berikutnya ")):r("",!0)]))])])],2)):r("",!0)])]),t.showModalEndExam?(i(),o("div",{key:0,class:w(["modal fade",{show:t.showModalEndExam}]),tabindex:"-1","aria-hidden":"true",style:{display:"block"},role:"dialog"},[n("div",Ft,[n("div",Gt,[a[17]||(a[17]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title"},"Akhiri Try Out ?")],-1)),a[18]||(a[18]=n("div",{class:"modal-body"}," Setelah mengakhiri Try Out, Anda tidak dapat kembali ke Try Out ini lagi. Yakin akan mengakhiri Try Out? ",-1)),n("div",Wt,[n("button",{onClick:a[11]||(a[11]=(...s)=>t.endExam&&t.endExam(...s)),type:"button",class:"btn btn-danger",style:{width:"6rem"}}," Ya "),n("button",{onClick:a[12]||(a[12]=s=>t.showModalEndExam=!1),type:"button",class:"btn btn-secondary",style:{width:"6rem"}}," Tidak ")])])])],2)):r("",!0),t.showModalEndTimeExam?(i(),o("div",{key:1,class:w(["modal fade",{show:t.showModalEndTimeExam}]),"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",style:{display:"block","z-index":"9999"},role:"dialog"},[n("div",Xt,[n("div",Zt,[n("div",pt,[e.section==e.lastSection?(i(),o("h5",$t," Waktu Habis ! ")):(i(),o("h5",te," Lanjut ke bagian selanjutnya dalam hitungan : "))]),n("div",ee,[e.section==e.lastSection?(i(),o("div",ne,[...a[19]||(a[19]=[C(" Waktu Try Out sudah berakhir!. Klik ",-1),n("strong",{class:"fw-bold"},"Ya",-1),C(" untuk mengakhiri Try Out. ",-1)])])):(i(),o("div",ae,[n("div",oe,[M(k,{time:5e3,onProgress:t.handleChangeDuration,onEnd:t.endExam},{default:A(({hours:s,minutes:l,seconds:g})=>[n("h2",ie,[n("span",se,m(g),1)])]),_:1},8,["onProgress","onEnd"])])]))]),e.section==e.lastSection?(i(),o("div",de,[n("button",{onClick:a[13]||(a[13]=(...s)=>t.endExam&&t.endExam(...s)),type:"button",class:"btn btn-primary"}," Ya ")])):r("",!0)])])],2)):r("",!0)],64)}const be=X(Z,[["render",le]]);export{be as default};
